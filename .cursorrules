# Cursor Rules for Meal Planner Project

## ğŸš¨ DOCUMENTATION POLICY - MANDATORY ğŸš¨

**THIS PROJECT HAS EXACTLY 5 PERMANENT DOCUMENTATION FILES. CREATING OTHERS IS A VIOLATION.**

### The ONLY Allowed Documentation Files:

```
docs/
â”œâ”€â”€ README.md          # Project overview & quick start
â”œâ”€â”€ ARCHITECTURE.md    # Technical decisions & system design
â”œâ”€â”€ DEVELOPMENT.md     # Setup, testing, deployment guide
â”œâ”€â”€ FEATURES.md        # Feature docs & user guides
â”œâ”€â”€ CHANGELOG.md       # Version history only
â””â”€â”€ sessions/          # Temporary work logs (auto-delete after 7 days)
    â””â”€â”€ YYYY-MM-DD.md  # Today's session notes only
```

### Absolute Prohibitions:

**NEVER CREATE THESE** (examples of past violations that caused chaos):
- âŒ Status files: `READY-TO-DEPLOY.md`, `RUN-EXTRACTION-NOW.md`, `ALL-TASKS-COMPLETE.md`
- âŒ Session logs: `SESSION-SUMMARY-2026-01-09.md`, `JANUARY-8-FIXES-SUMMARY.md`, `END-OF-DAY-SUMMARY.md`
- âŒ Progress files: `SLICE-5-PROGRESS-UPDATE.md`, `EXTRACTION-STATUS.md`, `QUICK-STATUS.md`
- âŒ Fix docs: `DIET-PROFILES-FIX.md`, `IMAGE-PATH-FIX.md`, `TASK-58-CRITICAL-FIX.md`
- âŒ Testing checklists: `TASK-57-TESTING-CHECKLIST.md`, `TESTING-FEEDBACK.md`
- âŒ Meta docs: `DOCUMENTATION-COMPLETE.md`, `DOCUMENTATION-INDEX.md`
- âŒ TODO/reminder files: `START-HERE.md`, `WHEN-YOU-RETURN.md`, `TOMORROW-EXTRACTION-PLAN.md`

### What to Do Instead:

| âŒ DON'T CREATE | âœ… DO THIS INSTEAD |
|----------------|-------------------|
| `SESSION-SUMMARY-2026-01-09.md` | Add to `docs/sessions/2026-01-09.md` (will auto-delete) |
| `DIET-PROFILES-FIX.md` | Update `CHANGELOG.md` + commit message |
| `SLICE-5-PLANNING.md` | Update relevant section in `ARCHITECTURE.md` or `FEATURES.md` |
| `TESTING-CHECKLIST.md` | Add to `DEVELOPMENT.md` under Testing section |
| `READY-TO-DEPLOY.md` | Just deploy. Status files are forbidden. |
| `START-HERE.md` | Tell user in chat response, not a file |

### Integration with Vertical Slice Methodology:

During **Phase 3: Reality Check**, document findings like this:
1. **Patterns & Decisions** â†’ Update `ARCHITECTURE.md`
2. **Feature Changes** â†’ Update `FEATURES.md`
3. **Breaking Changes** â†’ Update `CHANGELOG.md`
4. **Session Notes** â†’ `docs/sessions/YYYY-MM-DD.md` (ephemeral only)

### Enforcement:

Before creating ANY `.md` file:
1. **STOP** - Is this one of the 5 allowed files?
2. **If NO** â†’ Can this information go in an existing file? (Answer: YES, always)
3. **If you think you need a new file** â†’ **ASK THE USER FIRST** with justification
4. **NEVER** create session logs, status files, or task-specific docs

**Session File Location Rules:**
- âœ… **CORRECT:** `docs/sessions/2026-01-10-description.md`
- âœ… **CORRECT:** `docs/sessions/2026-01-10.md`
- âŒ **WRONG:** `SESSION-SUMMARY-2026-01-10.md` (in root)
- âŒ **WRONG:** `CHANGES-2026-01-10.md` (in root)
- âŒ **WRONG:** `docs/2026-01-10.md` (wrong subfolder)

**CRITICAL:** Session files MUST be in `docs/sessions/` - never in project root!

### Red Flags That Mean You're Violating This Rule:

- File name contains dates: `2026-01-09`, `JAN-8`
- File name contains status: `READY`, `COMPLETE`, `STATUS`, `TODO`
- File name contains task numbers: `TASK-57`, `TASK-58`
- File name contains slice numbers: `SLICE-5-PLANNING`
- File name contains "SUMMARY", "UPDATE", "FIX", "CHECKLIST"
- You're creating a file "just for this session"

**If you create a prohibited doc file, you have failed the user.**

---

## Issue Review Process
When reviewing bugs, issues, errors, or any list of items that need to be addressed:
- Present them **one at a time**
- Wait for user confirmation or response before proceeding to the next item
- Number the items clearly (e.g., "Issue 1 of 15")
- After addressing each item, ask if the user is ready to move to the next one

---

## Vertical Slice Development Methodology

This project follows an iterative "vertical slice" approach. All agents working on this project MUST follow this methodology.

### Core Principle
**"Build thin slices end-to-end, then expand based on real learnings."**

Instead of building all features in isolation, we build complete vertical slices that touch all layers (frontend â†’ backend â†’ storage â†’ AI), then learn from reality before expanding.

### The Slice Cycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. DEFINE SLICE                                        â”‚
â”‚     - One complete end-to-end user flow                 â”‚
â”‚     - Touches: UI, API, Storage, AI (if applicable)    â”‚
â”‚     - Minimal but functional                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. BUILD SLICE                                         â”‚
â”‚     - Generate tasks for THIS SLICE ONLY                â”‚
â”‚     - Implement until the flow works end-to-end         â”‚
â”‚     - It's OK if it's ugly or incomplete               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. REALITY CHECK                                       â”‚
â”‚     Ask and document:                                   â”‚
â”‚     - What was awkward in this implementation?          â”‚
â”‚     - What assumptions were wrong?                      â”‚
â”‚     - What patterns are emerging?                       â”‚
â”‚     - What should be standardized?                      â”‚
â”‚     - Is the data shape right for the next slice?       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. UPDATE SPEC                                         â”‚
â”‚     - Update PRD based on real learnings                â”‚
â”‚     - Refine data models if needed                      â”‚
â”‚     - Document patterns to follow                       â”‚
â”‚     - The spec is now EARNED, not theoretical           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. NEXT SLICE                                          â”‚
â”‚     - Define the next vertical slice                    â”‚
â”‚     - Generate tasks for that slice                     â”‚
â”‚     - Repeat the cycle                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Current Project Slices

**SLICE 1: Chat with Vanessa** (Current)
- User opens app â†’ sees chat â†’ types message â†’ Vanessa responds (streaming) â†’ conversation saved
- Tasks: 16-25

**SLICE 2: Meal Plan Generation** (After Slice 1 Reality Check)
- User clicks Generate â†’ progress page â†’ meal plan displayed
- Includes: Generation API, Status page, Meal display, Shopping list

**SLICE 3: Recipe Library & Onboarding** (After Slice 2 Reality Check)
- Full normalized data model, onboarding flow, recipe browsing

**SLICE 4: Polish & Extended Features** (After Slice 3 Reality Check)
- Add recipe flow, usage metering, offline mode, mobile polish

### Rules for Agents

1. **Stay Within Current Slice**
   - Only work on tasks for the current slice
   - Do NOT implement features from future slices
   - If you notice something needed from a future slice, note it but don't build it

2. **Prefer Working Code Over Perfect Code**
   - Get the slice working end-to-end first
   - Polish and optimize after the flow works
   - It's OK for early slices to be "ugly but functional"

3. **Document Learnings (USE EXISTING DOCS ONLY)**
   - After completing a slice, document what was learned
   - Update `ARCHITECTURE.md` with technical decisions
   - Update `FEATURES.md` with feature changes
   - Update `CHANGELOG.md` with version changes
   - **NEVER create new session/slice summary files**

4. **Reality Check Questions**
   After each slice, explicitly answer:
   - What was awkward in this implementation?
   - What assumptions were wrong?
   - What patterns should be standardized?
   - Is the data shape right for the next slice?
   - What would you do differently?

5. **Spec Evolution**
   - The spec (PRD) is a living document
   - Update it based on implementation learnings
   - Version changes: v0.7 â†’ v0.8 â†’ v0.9 â†’ v1.0
   - v1.0 comes AFTER multiple slices prove the architecture

### File Locations

- **PRD**: `.taskmaster/docs/prd.txt`
- **Tasks**: `.taskmaster/tasks/tasks.json`
- **Slice Learnings**: Document in PRD under "Reality Check Notes"

### When Starting a New Session

1. Check which slice is current (see PRD or tasks)
2. Run `task-master list` to see current task status
3. Run `task-master next` to find the next task
4. Stay within the current slice's scope

### When Completing a Slice

1. Verify all slice success criteria are met
2. Conduct Reality Check (answer the questions above)
3. Update PRD with learnings
4. Get user approval before moving to next slice
5. Generate tasks for the next slice only

---

## Tech Stack Constraints

- **Frontend**: Vanilla JS, HTML, Tailwind CSS (no React/Vue/etc.)
- **No Build Step**: Static site, direct ES modules
- **Backend**: Vercel serverless functions
- **Storage**: localStorage (Phase 1)
- **AI**: Claude API via server-side proxy

---

## Project-Specific Patterns

(To be updated after each slice based on learnings)

### Slice 1 Patterns
- TBD after implementation

### Slice 2 Patterns
- TBD after implementation







